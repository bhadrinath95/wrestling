{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Players</h2>
  <a href="{% url 'player-create' %}" class="btn btn-success">+ Add Player</a>
</div>
<div class="row">
  <form method="get" class="row mb-3">
    <div class="col-md-3">
      {{ form.band }}
    </div>
    <div class="col-md-3">
      {{ form.gender }}
    </div>
    <div class="col-md-3">
      {{ form.sort_by }}
    </div>
</form>
</div>
<div class="table-responsive">
<table class="table table-hover table-bordered">
  <thead class="table-dark">
    <tr>
      <th>Name</th><th>Championship</th><th>Gender</th><th>Wins</th><th>Matches</th>
      <th>Win %</th><th>Net Worth</th><th>Band</th><th>Spouse</th><th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% if players %}
      {% for player in players %}
      <tr>
        <td>{{ player.name }}</td>
        <td>{{ player.gender }}</td>
        <td>{{ player.wins }}</td>
        <td>{{ player.matchesplayed }}</td>
        <td>{{ player.winningpercentage|floatformat:2 }}%</td>
        <td>â‚¹ {{ player.networth|floatformat:2 }}</td>
        <td>{{ player.band.name }}</td>
        <td>
          {% if player and player.spouse %}
            {{ player.spouse.name }}
          {% endif %}
        </td>
        <td>
          <a href="{% url 'player-view' player.id %}" class="btn btn-info btn-sm">View</a>
          <a href="{% url 'player-update' player.pk %}" class="btn btn-sm btn-warning">Edit</a>
          <a href="{% url 'player-delete' player.pk %}" class="btn btn-sm btn-danger">Delete</a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="8" class="text-center">No players yet.</td></tr>
      {% endfor %}
    {% endif %}
  </tbody>
</table>
</div>

{% endblock %}
